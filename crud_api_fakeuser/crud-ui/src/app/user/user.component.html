<div class="container" style="margin-top: 3%;">
    <div class="row">
        <div class="col-md-10">
            <table class="table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Firstname</th>
                    <th>Lastname</th>
                    <th>Email</th>
                    <th>Role</th>
                  </tr>
                </thead>
                    <tr *ngFor="let user of users">
                        <td>{{user.objectId}}</td>
                        <td>{{user.first_name}}</td>
                        <td>{{user.last_name}}</td>
                        <td>{{user.email}}</td>
                        <td>{{user.roles}}</td>
                        <td (click)="openUpdate(content, user)" style="cursor: pointer;"><i class="fas fa-pen"></i></td>
                        <td (click)="onDelete(user.objectId)" style="cursor: pointer;"><i class="fas fa-trash-alt"></i></td>
                    </tr>
              </table>
        </div>
        <div class="col-md-2"> 
            <i style="cursor: pointer;" (click)="openCreate(content)" class="fas fa-plus-square icon"></i>
        </div>
    </div>
</div>

<!-- MODAL -->
<ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Management user</h4>
      <button type="button" class="close" aria-label="Close" (click)="resetForm()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="formItem">
            <div>
                <input type="hidden" [formControl]="objectId">
            </div>
            <div>
                First name: <input [formControl]="first_name" class="left-input-first-name">
                <div *ngIf="first_name.touched">
                    <div *ngIf="first_name.hasError('required')" [ngClass]="error" class="err"> First mame required </div>
                </div>
            </div>
            <div class="top-div">
                Last name: <input [formControl]="last_name" class="left-input-last-name">
                <div *ngIf="last_name.touched">
                    <div *ngIf="last_name.hasError('required')" [ngClass]="error" class="err"> Last name required </div>
                </div>
            </div>
            <div class="top-div">
                Email: <input [formControl]="email" class="left-input-email" >
                <div *ngIf="email.touched">
                    <div *ngIf="email.hasError('required')" [ngClass]="error" class="err"> Email required </div>
                    <div *ngIf="email.hasError('pattern')" [ngClass]="error" class="err"> Email not invalid </div>
                </div>
            </div>
            <div class="top-div">
                Password: <input [formControl]="password" class="left-input-password">
                <div *ngIf="password.touched">
                    <div *ngIf="password.hasError('required')" [ngClass]='error' class="err"> Password required </div>
                    <div *ngIf="password.hasError('minlength')" [ngClass]='error' class="err"> Password required least 8 characters long
                    </div>
                    <div *ngIf="password.hasError('maxlength')" [ngClass]='error' class="err"> Password required last 10 characters long
                    </div>
                    <div *ngIf="password.hasError('pattern')" [ngClass]='error' class="err"> Password 
                        requires 1 uppercase letter | 1 lowercase letter | 1 number | 1 special character </div>
                </div>
            </div>
            <div class="top-div">
                Role: <select id="roles" formControlName="roles" class="left-input-role">
                    <option *ngFor="let roles of role" [ngValue]="roles">{{ roles }}</option>
                </select>
                <div *ngIf="roles.touched">
                    <div *ngIf="roles.hasError('required')" [ngClass]="error" class="err"> Roles required </div>
                </div>
            </div>
        </form>        
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="onSubmit()" >Save</button>
    </div>
    
  </ng-template>